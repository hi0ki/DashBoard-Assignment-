module.exports=[47284,a=>{"use strict";var b=a.i(87924);let c=a.i(72131).default.forwardRef(({className:a="",...c},d)=>(0,b.jsx)("input",{ref:d,className:`w-full px-4 py-2 rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-900 text-gray-900 dark:text-white focus:ring-2 focus:ring-primary-500 focus:border-transparent outline-none transition-all placeholder-gray-400 dark:placeholder-gray-500 ${a}`,...c}));a.s(["Button",0,({children:a,variant:c="primary",className:d="",isLoading:e,...f})=>(0,b.jsxs)("button",{className:`px-4 py-2 rounded-lg font-medium transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center ${{primary:"bg-primary-600 hover:bg-primary-700 text-white shadow-sm hover:shadow",outline:"border border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-700"}[c]} ${d}`,disabled:e||f.disabled,...f,children:[e&&(0,b.jsxs)("svg",{className:"animate-spin -ml-1 mr-2 h-4 w-4 text-current",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[(0,b.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,b.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),a]}),"Card",0,({children:a,className:c=""})=>(0,b.jsx)("div",{className:`bg-white dark:bg-gray-800 rounded-xl border border-gray-200 dark:border-gray-700 shadow-sm ${c}`,children:a}),"Input",0,c])},14523,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(47284),e=a.i(20180);function f(){let{user:a,isLoaded:f}=(0,e.useUser)(),[g,h]=(0,c.useState)(!1),[i,j]=(0,c.useState)(""),[k,l]=(0,c.useState)(""),[m,n]=(0,c.useState)(""),[o,p]=(0,c.useState)(""),[q,r]=(0,c.useState)(""),[s,t]=(0,c.useState)("");(0,c.useEffect)(()=>{a&&(u(),l(a.firstName||""),n(a.lastName||""))},[a]);let u=async()=>{try{let a=await fetch("/api/profile");if(a.ok){let b=await a.json();b&&(l(b.firstName||""),n(b.lastName||""),p(b.imageUrl||""),r(b.bio||""),t(b.phone||""))}}catch(a){console.error("Error loading profile:",a)}},v=async a=>{let b=a.target.files?.[0];if(b){if(b.size>1048576)return void j("Image size must be less than 1MB");let a=document.createElement("canvas"),c=a.getContext("2d"),d=new Image;d.onload=()=>{let{width:b,height:e}=d;b>e?b>300&&(e=300*e/b,b=300):e>300&&(b=300*b/e,e=300),a.width=b,a.height=e,c?.drawImage(d,0,0,b,e),p(a.toDataURL("image/jpeg",.7))},d.src=URL.createObjectURL(b)}},w=async b=>{if(b.preventDefault(),a){h(!0),j("");try{if(!(await fetch("/api/profile",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({firstName:k,lastName:m,imageUrl:o,bio:q,phone:s})})).ok)throw Error("Failed to update profile");await a.update({firstName:k,lastName:m}),j("Profile updated successfully!")}catch(a){console.error("Profile update error:",a),j("Failed to update profile.")}finally{h(!1)}}};return f&&a?(0,b.jsxs)("div",{className:"max-w-3xl mx-auto space-y-6",children:[(0,b.jsxs)("div",{className:"flex flex-col gap-1",children:[(0,b.jsx)("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"Profile"}),(0,b.jsx)("p",{className:"text-gray-500 dark:text-gray-400",children:"Manage your account settings"})]}),(0,b.jsx)(d.Card,{className:"p-6",children:(0,b.jsxs)("form",{onSubmit:w,className:"space-y-8",children:[i&&(0,b.jsx)("div",{className:`p-3 rounded-lg text-sm ${i.includes("success")?"bg-green-50 text-green-700 dark:bg-green-900/20 dark:text-green-400":"bg-red-50 text-red-700"}`,children:i}),(0,b.jsxs)("div",{className:"flex flex-col md:flex-row gap-8 items-start",children:[(0,b.jsxs)("div",{className:"flex flex-col items-center space-y-4",children:[(0,b.jsxs)("div",{className:"relative h-32 w-32 rounded-full overflow-hidden bg-gray-100 dark:bg-gray-800 border-4 border-white dark:border-gray-700 shadow-md group",children:[o?(0,b.jsx)("img",{src:o,alt:"Profile",className:"h-full w-full object-cover"}):a.imageUrl?(0,b.jsx)("img",{src:a.imageUrl,alt:"Profile",className:"h-full w-full object-cover"}):(0,b.jsx)("div",{className:"h-full w-full flex items-center justify-center text-4xl font-bold text-gray-400",children:a.firstName?.charAt(0)||a.username?.charAt(0)||"U"}),(0,b.jsx)("div",{className:"absolute inset-0 bg-black/40 flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity cursor-pointer",children:(0,b.jsx)("span",{className:"text-white text-xs font-medium",children:"Change"})}),(0,b.jsx)("input",{type:"file",accept:"image/*",onChange:v,className:"absolute inset-0 w-full h-full opacity-0 cursor-pointer"})]}),(0,b.jsxs)("div",{className:"text-center",children:[(0,b.jsxs)("button",{type:"button",className:"relative text-sm text-primary-600 font-medium hover:text-primary-500",children:[(0,b.jsx)("span",{children:"Change Profile Picture"}),(0,b.jsx)("input",{type:"file",accept:"image/*",onChange:v,className:"absolute inset-0 w-full h-full opacity-0 cursor-pointer"})]}),(0,b.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"JPG, GIF or PNG. Max 1MB."}),(0,b.jsx)("p",{className:"text-xs text-gray-400 mt-1",children:"Default: Gmail profile picture"})]})]}),(0,b.jsxs)("div",{className:"flex-1 w-full space-y-6",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"First Name"}),(0,b.jsx)(d.Input,{value:k,onChange:a=>l(a.target.value),required:!0,placeholder:"John"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Last Name"}),(0,b.jsx)(d.Input,{value:m,onChange:a=>n(a.target.value),required:!0,placeholder:"Doe"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Email Address"}),(0,b.jsx)(d.Input,{value:a.primaryEmailAddress?.emailAddress||"No email",disabled:!0,className:"bg-gray-50 dark:bg-gray-800 cursor-not-allowed opacity-60"}),(0,b.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"Email cannot be changed here. Manage it in your Google account."})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Phone Number"}),(0,b.jsx)(d.Input,{type:"tel",value:s,onChange:a=>t(a.target.value),placeholder:"+1 (555) 123-4567"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Bio"}),(0,b.jsx)("textarea",{value:q,onChange:a=>r(a.target.value),placeholder:"Tell us about yourself...",rows:4,className:"w-full px-4 py-2 rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-900 text-gray-900 dark:text-white focus:ring-2 focus:ring-primary-500 focus:border-transparent outline-none transition-all placeholder-gray-400 dark:placeholder-gray-500 resize-none"})]})]})]}),(0,b.jsx)("div",{className:"flex justify-end pt-6 border-t border-gray-200 dark:border-gray-700",children:(0,b.jsx)(d.Button,{type:"submit",isLoading:g,children:"Save Changes"})})]})})]}):(0,b.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:(0,b.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})})}a.s(["default",()=>f])}];

//# sourceMappingURL=_66dc80ab._.js.map