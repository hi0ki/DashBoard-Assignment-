(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,61072,e=>{"use strict";var r=e.i(43476);let a=e.i(71645).default.forwardRef(({className:e="",...a},t)=>(0,r.jsx)("input",{ref:t,className:`w-full px-4 py-2 rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-900 text-gray-900 dark:text-white focus:ring-2 focus:ring-primary-500 focus:border-transparent outline-none transition-all placeholder-gray-400 dark:placeholder-gray-500 ${e}`,...a}));e.s(["Button",0,({children:e,variant:a="primary",className:t="",isLoading:s,...l})=>(0,r.jsxs)("button",{className:`px-4 py-2 rounded-lg font-medium transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center ${{primary:"bg-primary-600 hover:bg-primary-700 text-white shadow-sm hover:shadow",outline:"border border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-700"}[a]} ${t}`,disabled:s||l.disabled,...l,children:[s&&(0,r.jsxs)("svg",{className:"animate-spin -ml-1 mr-2 h-4 w-4 text-current",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[(0,r.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,r.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),e]}),"Card",0,({children:e,className:a=""})=>(0,r.jsx)("div",{className:`bg-white dark:bg-gray-800 rounded-xl border border-gray-200 dark:border-gray-700 shadow-sm ${a}`,children:e}),"Input",0,a])},62865,e=>{"use strict";var r=e.i(43476),a=e.i(71645),t=e.i(61072),s=e.i(1528);function l(){let{user:e,isLoaded:l}=(0,s.useUser)(),[i,o]=(0,a.useState)(!1),[d,c]=(0,a.useState)(""),[n,m]=(0,a.useState)(""),[u,x]=(0,a.useState)(""),[g,h]=(0,a.useState)(""),[p,y]=(0,a.useState)(""),[f,b]=(0,a.useState)("");(0,a.useEffect)(()=>{e&&(j(),m(e.firstName||""),x(e.lastName||""))},[e]);let j=async()=>{try{let e=await fetch("/api/profile");if(e.ok){let r=await e.json();r&&(m(r.firstName||""),x(r.lastName||""),h(r.imageUrl||""),y(r.bio||""),b(r.phone||""))}}catch(e){console.error("Error loading profile:",e)}},N=async e=>{let r=e.target.files?.[0];if(r){if(r.size>1048576)return void c("Image size must be less than 1MB");let e=document.createElement("canvas"),a=e.getContext("2d"),t=new Image;t.onload=()=>{let{width:r,height:s}=t;r>s?r>300&&(s=300*s/r,r=300):s>300&&(r=300*r/s,s=300),e.width=r,e.height=s,a?.drawImage(t,0,0,r,s),h(e.toDataURL("image/jpeg",.7))},t.src=URL.createObjectURL(r)}},v=async r=>{if(r.preventDefault(),e){o(!0),c("");try{if(!(await fetch("/api/profile",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({firstName:n,lastName:u,imageUrl:g,bio:p,phone:f})})).ok)throw Error("Failed to update profile");await e.update({firstName:n,lastName:u}),c("Profile updated successfully!")}catch(e){console.error("Profile update error:",e),c("Failed to update profile.")}finally{o(!1)}}};return l&&e?(0,r.jsxs)("div",{className:"max-w-3xl mx-auto space-y-6",children:[(0,r.jsxs)("div",{className:"flex flex-col gap-1",children:[(0,r.jsx)("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"Profile"}),(0,r.jsx)("p",{className:"text-gray-500 dark:text-gray-400",children:"Manage your account settings"})]}),(0,r.jsx)(t.Card,{className:"p-6",children:(0,r.jsxs)("form",{onSubmit:v,className:"space-y-8",children:[d&&(0,r.jsx)("div",{className:`p-3 rounded-lg text-sm ${d.includes("success")?"bg-green-50 text-green-700 dark:bg-green-900/20 dark:text-green-400":"bg-red-50 text-red-700"}`,children:d}),(0,r.jsxs)("div",{className:"flex flex-col md:flex-row gap-8 items-start",children:[(0,r.jsxs)("div",{className:"flex flex-col items-center space-y-4",children:[(0,r.jsxs)("div",{className:"relative h-32 w-32 rounded-full overflow-hidden bg-gray-100 dark:bg-gray-800 border-4 border-white dark:border-gray-700 shadow-md group",children:[g?(0,r.jsx)("img",{src:g,alt:"Profile",className:"h-full w-full object-cover"}):e.imageUrl?(0,r.jsx)("img",{src:e.imageUrl,alt:"Profile",className:"h-full w-full object-cover"}):(0,r.jsx)("div",{className:"h-full w-full flex items-center justify-center text-4xl font-bold text-gray-400",children:e.firstName?.charAt(0)||e.username?.charAt(0)||"U"}),(0,r.jsx)("div",{className:"absolute inset-0 bg-black/40 flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity cursor-pointer",children:(0,r.jsx)("span",{className:"text-white text-xs font-medium",children:"Change"})}),(0,r.jsx)("input",{type:"file",accept:"image/*",onChange:N,className:"absolute inset-0 w-full h-full opacity-0 cursor-pointer"})]}),(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsxs)("button",{type:"button",className:"relative text-sm text-primary-600 font-medium hover:text-primary-500",children:[(0,r.jsx)("span",{children:"Change Profile Picture"}),(0,r.jsx)("input",{type:"file",accept:"image/*",onChange:N,className:"absolute inset-0 w-full h-full opacity-0 cursor-pointer"})]}),(0,r.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"JPG, GIF or PNG. Max 1MB."}),(0,r.jsx)("p",{className:"text-xs text-gray-400 mt-1",children:"Default: Gmail profile picture"})]})]}),(0,r.jsxs)("div",{className:"flex-1 w-full space-y-6",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"First Name"}),(0,r.jsx)(t.Input,{value:n,onChange:e=>m(e.target.value),required:!0,placeholder:"John"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Last Name"}),(0,r.jsx)(t.Input,{value:u,onChange:e=>x(e.target.value),required:!0,placeholder:"Doe"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Email Address"}),(0,r.jsx)(t.Input,{value:e.primaryEmailAddress?.emailAddress||"No email",disabled:!0,className:"bg-gray-50 dark:bg-gray-800 cursor-not-allowed opacity-60"}),(0,r.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"Email cannot be changed here. Manage it in your Google account."})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Phone Number"}),(0,r.jsx)(t.Input,{type:"tel",value:f,onChange:e=>b(e.target.value),placeholder:"+1 (555) 123-4567"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Bio"}),(0,r.jsx)("textarea",{value:p,onChange:e=>y(e.target.value),placeholder:"Tell us about yourself...",rows:4,className:"w-full px-4 py-2 rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-900 text-gray-900 dark:text-white focus:ring-2 focus:ring-primary-500 focus:border-transparent outline-none transition-all placeholder-gray-400 dark:placeholder-gray-500 resize-none"})]})]})]}),(0,r.jsx)("div",{className:"flex justify-end pt-6 border-t border-gray-200 dark:border-gray-700",children:(0,r.jsx)(t.Button,{type:"submit",isLoading:i,children:"Save Changes"})})]})})]}):(0,r.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:(0,r.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})})}e.s(["default",()=>l])}]);