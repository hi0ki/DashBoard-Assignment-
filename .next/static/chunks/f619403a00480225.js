(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,61072,e=>{"use strict";var t=e.i(43476);let a=e.i(71645).default.forwardRef(({className:e="",...a},r)=>(0,t.jsx)("input",{ref:r,className:`w-full px-4 py-2 rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-900 text-gray-900 dark:text-white focus:ring-2 focus:ring-primary-500 focus:border-transparent outline-none transition-all placeholder-gray-400 dark:placeholder-gray-500 ${e}`,...a}));e.s(["Button",0,({children:e,variant:a="primary",className:r="",isLoading:s,...i})=>(0,t.jsxs)("button",{className:`px-4 py-2 rounded-lg font-medium transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center ${{primary:"bg-primary-600 hover:bg-primary-700 text-white shadow-sm hover:shadow",outline:"border border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-700"}[a]} ${r}`,disabled:s||i.disabled,...i,children:[s&&(0,t.jsxs)("svg",{className:"animate-spin -ml-1 mr-2 h-4 w-4 text-current",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[(0,t.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,t.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),e]}),"Card",0,({children:e,className:a=""})=>(0,t.jsx)("div",{className:`bg-white dark:bg-gray-800 rounded-xl border border-gray-200 dark:border-gray-700 shadow-sm ${a}`,children:e}),"Input",0,a])},73375,63059,e=>{"use strict";var t=e.i(75254);let a=(0,t.default)("chevron-left",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);e.s(["ChevronLeft",()=>a],73375);let r=(0,t.default)("chevron-right",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);e.s(["ChevronRight",()=>r],63059)},43518,e=>{"use strict";var t=e.i(43476),a=e.i(71645),r=e.i(1528),s=e.i(61072),i=e.i(75254);let d=(0,i.default)("eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]),l=(0,i.default)("eye-off",[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]);var n=e.i(61911);let c=(0,i.default)("user-check",[["path",{d:"m16 11 2 2 4-4",key:"9rsbq5"}],["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]]),o=(0,i.default)("triangle-alert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);var x=e.i(73375),m=e.i(63059);function g(){let e,i,g,h,{user:y}=(0,r.useUser)(),[p,u]=(0,a.useState)("unviewed"),[f,w]=(0,a.useState)([]),[k,j]=(0,a.useState)(!0),[v,b]=(0,a.useState)(1),[N,C]=(0,a.useState)(""),[S,M]=(0,a.useState)(50),[$,z]=(0,a.useState)(""),[A,T]=(0,a.useState)({page:1,pages:1,total:0,limit:15}),B=async(e,t=1)=>{if(y?.id){j(!0);try{let a=new URLSearchParams({page:t.toString(),limit:"15",viewed:("viewed"===e).toString()});N.trim()&&a.append("search",N.trim());let r=await fetch(`/api/contacts?${a}`),s=await r.json();r.ok?(w(s.contacts),T(s.pagination),void 0!==s.remaining&&M(s.remaining)):(console.error("Error loading contacts:",s.error),w([]))}catch(e){console.error("Error loading contacts:",e),w([])}finally{j(!1)}}},R=async()=>{if(y?.id)try{let e=await fetch("/api/credits"),t=await e.json();e.ok&&M(t.remaining)}catch(e){console.error("Error loading user credits:",e)}};(0,a.useEffect)(()=>{y?.id&&R()},[y?.id]);let D=async e=>{try{let t=await fetch(`/api/contacts/${e}/view`,{method:"POST"}),a=await t.json();t.ok?(M(a.remaining||0),w(t=>t.map(t=>t.id===e?{...t,isViewed:!0,viewedAt:a.viewedAt}:t)),z("")):z(a.error||"Failed to mark contact as viewed")}catch(e){console.error("Error viewing contact:",e),z("Network error occurred")}},E=e=>{u(e),b(1),z("")},P=e=>{b(e),B(p,e)};(0,a.useEffect)(()=>{if(!y?.id)return;let e=setTimeout(()=>{b(1),B(p,1),R()},500*!!N);return()=>clearTimeout(e)},[y,p,N]);let U=A.pages,V=(v-1)*A.limit,q=Math.min(V+A.limit,A.total);return k&&0===f.length?(0,t.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:(0,t.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})}):(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsxs)("div",{className:"flex flex-col sm:flex-row sm:justify-between sm:items-start gap-4",children:[(0,t.jsxs)("div",{className:"flex flex-col gap-1",children:[(0,t.jsx)("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"Contacts"}),(0,t.jsx)("p",{className:"text-gray-500 dark:text-gray-400",children:"Access contact details of your network"}),(0,t.jsxs)("p",{className:"text-sm text-gray-400 dark:text-gray-500",children:["Showing ",V+1,"-",Math.min(q,A.total)," of ",A.total," contacts (Page ",v," of ",U,")"]})]}),(0,t.jsx)("div",{className:"flex flex-col items-end gap-2",children:(0,t.jsxs)("div",{className:"flex flex-col items-end",children:[(0,t.jsxs)("span",{className:`text-sm font-medium px-4 py-2 rounded-lg bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 shadow-sm ${S<10?"text-red-600":"text-gray-600 dark:text-gray-400"}`,children:["Credits Remaining: ",S]}),0===S&&(0,t.jsxs)("div",{className:"text-xs text-blue-600 dark:text-blue-400 mt-1 text-right",children:[(0,t.jsx)("span",{className:"block",children:"Credits reset daily at 00:00 AM"}),(0,t.jsxs)("span",{className:"text-gray-500 dark:text-gray-400",children:["Next reset: ",((e=new Date).setHours(23,0,0,0),new Date>=e&&e.setDate(e.getDate()+1),g=Math.floor((i=e.getTime()-new Date().getTime()+36e5)/36e5),h=Math.floor(i%36e5/6e4),`${g}h ${h}m`)]})]}),$&&(0,t.jsx)("span",{className:"text-xs text-red-600 mt-1 max-w-[200px] text-right",children:$})]})})]}),(0,t.jsxs)("div",{className:"flex space-x-1 p-1 bg-gray-100 dark:bg-gray-800 rounded-lg w-fit",children:[(0,t.jsxs)("button",{onClick:()=>E("unviewed"),className:`px-4 py-2 rounded-md text-sm font-medium transition-colors flex items-center gap-2 ${"unviewed"===p?"bg-white dark:bg-gray-700 text-primary-600 dark:text-primary-400 shadow-sm":"text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-gray-200"}`,children:[(0,t.jsx)(n.Users,{size:16}),"Unviewed"]}),(0,t.jsxs)("button",{onClick:()=>E("viewed"),className:`px-4 py-2 rounded-md text-sm font-medium transition-colors flex items-center gap-2 ${"viewed"===p?"bg-white dark:bg-gray-700 text-primary-600 dark:text-primary-400 shadow-sm":"text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-gray-200"}`,children:[(0,t.jsx)(c,{size:16}),"Viewed"]})]}),(0,t.jsx)("div",{className:"flex gap-4",children:(0,t.jsx)("input",{type:"text",placeholder:"Search contacts...",value:N,onChange:e=>C(e.target.value),className:"flex-1 px-4 py-2 rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-900 text-gray-900 dark:text-white focus:ring-2 focus:ring-primary-500 focus:border-transparent outline-none"})}),(0,t.jsx)(s.Card,{className:"overflow-hidden",children:(0,t.jsx)("div",{className:"overflow-x-auto",children:(0,t.jsxs)("table",{className:"min-w-full divide-y divide-gray-200 dark:divide-gray-700",children:[(0,t.jsx)("thead",{className:"bg-gray-50 dark:bg-gray-800",children:(0,t.jsxs)("tr",{children:[(0,t.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Name"}),(0,t.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Job Title"}),(0,t.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Department"}),(0,t.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Contact Info"}),(0,t.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Action"})]})}),(0,t.jsx)("tbody",{className:"bg-white dark:bg-gray-900 divide-y divide-gray-200 dark:divide-gray-700",children:k?(0,t.jsx)("tr",{children:(0,t.jsx)("td",{colSpan:5,className:"px-6 py-8 text-center text-gray-500 dark:text-gray-400",children:"Loading contacts..."})}):0===f.length?(0,t.jsx)("tr",{children:(0,t.jsx)("td",{colSpan:5,className:"px-6 py-8 text-center text-gray-500 dark:text-gray-400",children:"viewed"===p?"No contacts viewed yet":"No unviewed contacts available"})}):f.map(e=>{let a=e.isViewed;return(0,t.jsxs)("tr",{className:"hover:bg-gray-50 dark:hover:bg-gray-800 transition-colors",children:[(0,t.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900 dark:text-white",children:e.name}),(0,t.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-400",children:e.position}),(0,t.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-400",children:e.department}),(0,t.jsx)("td",{className:"px-6 py-4",children:(0,t.jsx)("div",{className:"text-sm",children:a?(0,t.jsxs)("div",{className:"space-y-1",children:[(0,t.jsx)("p",{className:"text-gray-900 dark:text-white select-all",children:e.email}),(0,t.jsx)("p",{className:"text-gray-500 dark:text-gray-400 select-all",children:e.phone})]}):(0,t.jsx)("div",{className:"flex items-center text-gray-400",children:(0,t.jsx)("span",{className:"tracking-widest",children:"••••••••••••••••"})})})}),(0,t.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,t.jsx)(s.Button,{variant:a?"outline":"primary",className:`text-xs px-3 py-1.5 h-auto ${a?"cursor-default opacity-75":""}`,onClick:()=>D(e.id),disabled:a||S<=0,children:a?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(l,{size:14,className:"mr-1.5"}),"Revealed"]}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(d,{size:14,className:"mr-1.5"}),"View"]})})})]},e.id)})})]})})}),U>1&&(0,t.jsx)(s.Card,{className:"p-4",children:(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)(s.Button,{variant:"outline",onClick:()=>P(v-1),disabled:1===v,className:"flex items-center gap-2",children:[(0,t.jsx)(x.ChevronLeft,{size:16}),"Previous"]}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[Array.from({length:Math.min(5,U)},(e,a)=>{let r;return r=U<=5||v<=3?a+1:v>=U-2?U-4+a:v-2+a,(0,t.jsx)(s.Button,{variant:v===r?"primary":"outline",onClick:()=>P(r),className:"w-10 h-10 p-0",children:r},r)}),U>5&&v<U-2&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("span",{className:"text-gray-500",children:"..."}),(0,t.jsx)(s.Button,{variant:"outline",onClick:()=>P(U),className:"w-10 h-10 p-0",children:U})]})]}),(0,t.jsxs)(s.Button,{variant:"outline",onClick:()=>P(v+1),disabled:v===U,className:"flex items-center gap-2",children:["Next",(0,t.jsx)(m.ChevronRight,{size:16})]})]})}),(0,t.jsxs)("div",{className:"flex items-center justify-center gap-2 text-xs text-gray-400 dark:text-gray-600 mt-4",children:[(0,t.jsx)(o,{size:12}),(0,t.jsx)("span",{children:'Clicking "View" will consume 1 credit and move contact to viewed section.'})]})]})}e.s(["default",()=>g],43518)}]);