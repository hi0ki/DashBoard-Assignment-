(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,61072,e=>{"use strict";var a=e.i(43476);let t=e.i(71645).default.forwardRef(({className:e="",...t},r)=>(0,a.jsx)("input",{ref:r,className:`w-full px-4 py-2 rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-900 text-gray-900 dark:text-white focus:ring-2 focus:ring-primary-500 focus:border-transparent outline-none transition-all placeholder-gray-400 dark:placeholder-gray-500 ${e}`,...t}));e.s(["Button",0,({children:e,variant:t="primary",className:r="",isLoading:s,...i})=>(0,a.jsxs)("button",{className:`px-4 py-2 rounded-lg font-medium transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center ${{primary:"bg-primary-600 hover:bg-primary-700 text-white shadow-sm hover:shadow",outline:"border border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-700"}[t]} ${r}`,disabled:s||i.disabled,...i,children:[s&&(0,a.jsxs)("svg",{className:"animate-spin -ml-1 mr-2 h-4 w-4 text-current",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[(0,a.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,a.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),e]}),"Card",0,({children:e,className:t=""})=>(0,a.jsx)("div",{className:`bg-white dark:bg-gray-800 rounded-xl border border-gray-200 dark:border-gray-700 shadow-sm ${t}`,children:e}),"Input",0,t])},73375,63059,e=>{"use strict";var a=e.i(75254);let t=(0,a.default)("chevron-left",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);e.s(["ChevronLeft",()=>t],73375);let r=(0,a.default)("chevron-right",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);e.s(["ChevronRight",()=>r],63059)},43518,e=>{"use strict";var a=e.i(43476),t=e.i(71645),r=e.i(1528),s=e.i(61072),i=e.i(75254);let d=(0,i.default)("eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);var n=e.i(61911);let l=(0,i.default)("user-check",[["path",{d:"m16 11 2 2 4-4",key:"9rsbq5"}],["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]]),c=(0,i.default)("triangle-alert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);var o=e.i(73375),x=e.i(63059);function m(){let{user:e}=(0,r.useUser)(),[i,m]=(0,t.useState)("unviewed"),[g,h]=(0,t.useState)([]),[p,u]=(0,t.useState)(!0),[y,v]=(0,t.useState)(1),[f,j]=(0,t.useState)(""),[w,b]=(0,t.useState)(50),[k,N]=(0,t.useState)(""),[C,S]=(0,t.useState)({page:1,pages:1,total:0,limit:10}),z=async(a,t=1)=>{if(e?.id){u(!0);try{let e=new URLSearchParams({page:t.toString(),limit:"10",viewed:("viewed"===a).toString()});f.trim()&&e.append("search",f.trim());let r=await fetch(`/api/contacts?${e}`),s=await r.json();r.ok?(h(s.contacts),S(s.pagination),b(s.remaining||50)):(console.error("Error loading contacts:",s.error),h([]))}catch(e){console.error("Error loading contacts:",e),h([])}finally{u(!1)}}},P=async e=>{try{let a=await fetch(`/api/contacts/${e}/view`,{method:"POST"}),t=await a.json();a.ok?(b(t.remainingViews||0),z(i,y),N("")):N(t.error||"Failed to mark contact as viewed")}catch(e){console.error("Error viewing contact:",e),N("Network error occurred")}},V=e=>{m(e),v(1),N("")},$=e=>{v(e),z(i,e)};return((0,t.useEffect)(()=>{e?.id&&z(i,1)},[e,i,f]),(0,t.useEffect)(()=>{let a=setTimeout(()=>{e?.id&&(v(1),z(i,1))},500);return()=>clearTimeout(a)},[f]),p&&0===g.length)?(0,a.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:(0,a.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})}):(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"flex flex-col gap-1",children:[(0,a.jsx)("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"Contacts"}),(0,a.jsxs)("p",{className:"text-gray-500 dark:text-gray-400",children:["Manage and view your contacts. You can view ",w," new contacts today."]})]}),k&&(0,a.jsx)(s.Card,{className:"p-4 border-red-200 bg-red-50 dark:bg-red-900/20",children:(0,a.jsxs)("div",{className:"flex items-center gap-2 text-red-700 dark:text-red-400",children:[(0,a.jsx)(c,{size:20}),(0,a.jsx)("span",{children:k})]})}),(0,a.jsxs)("div",{className:"flex space-x-1 p-1 bg-gray-100 dark:bg-gray-800 rounded-lg w-fit",children:[(0,a.jsxs)("button",{onClick:()=>V("unviewed"),className:`px-4 py-2 rounded-md text-sm font-medium transition-colors flex items-center gap-2 ${"unviewed"===i?"bg-white dark:bg-gray-700 text-primary-600 dark:text-primary-400 shadow-sm":"text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-gray-200"}`,children:[(0,a.jsx)(n.Users,{size:16}),"Unviewed"]}),(0,a.jsxs)("button",{onClick:()=>V("viewed"),className:`px-4 py-2 rounded-md text-sm font-medium transition-colors flex items-center gap-2 ${"viewed"===i?"bg-white dark:bg-gray-700 text-primary-600 dark:text-primary-400 shadow-sm":"text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-gray-200"}`,children:[(0,a.jsx)(l,{size:16}),"Viewed"]})]}),(0,a.jsx)("div",{className:"flex gap-4",children:(0,a.jsx)("input",{type:"text",placeholder:"Search contacts...",value:f,onChange:e=>j(e.target.value),className:"flex-1 px-4 py-2 rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-900 text-gray-900 dark:text-white focus:ring-2 focus:ring-primary-500 focus:border-transparent outline-none"})}),(0,a.jsx)("div",{className:"grid gap-4",children:p?(0,a.jsxs)(s.Card,{className:"p-8 text-center",children:[(0,a.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto"}),(0,a.jsx)("p",{className:"mt-4 text-gray-500 dark:text-gray-400",children:"Loading contacts..."})]}):0===g.length?(0,a.jsx)(s.Card,{className:"p-8 text-center",children:(0,a.jsx)("div",{className:"text-gray-500 dark:text-gray-400",children:"viewed"===i?"No contacts viewed yet":"No unviewed contacts available"})}):g.map(e=>(0,a.jsx)(s.Card,{className:"p-6 hover:shadow-md transition-shadow",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3 mb-2",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:e.name}),e.isViewed&&(0,a.jsxs)("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-800 dark:bg-green-900/20 dark:text-green-400",children:[(0,a.jsx)(d,{size:12,className:"mr-1"}),"Viewed"]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4 text-sm text-gray-600 dark:text-gray-400",children:[e.email&&(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"font-medium",children:"Email:"}),(0,a.jsx)("span",{className:"ml-2",children:e.email})]}),e.phone&&(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"font-medium",children:"Phone:"}),(0,a.jsx)("span",{className:"ml-2",children:e.phone})]}),e.agency&&(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"font-medium",children:"Agency:"}),(0,a.jsx)("span",{className:"ml-2",children:e.agency})]}),e.position&&(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"font-medium",children:"Position:"}),(0,a.jsx)("span",{className:"ml-2",children:e.position})]})]}),e.viewedAt&&(0,a.jsxs)("div",{className:"mt-3 text-xs text-gray-500 dark:text-gray-400",children:["Viewed on ",new Date(e.viewedAt).toLocaleDateString()]})]}),!e.isViewed&&(0,a.jsxs)(s.Button,{onClick:()=>P(e.id),variant:"outline",className:"ml-4",children:[(0,a.jsx)(d,{size:16,className:"mr-2"}),"View Contact"]})]})},e.id))}),C.pages>1&&(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:["Showing ",(C.page-1)*C.limit+1," to ",Math.min(C.page*C.limit,C.total)," of ",C.total," contacts"]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsxs)(s.Button,{onClick:()=>$(C.page-1),disabled:1===C.page,variant:"outline",children:[(0,a.jsx)(o.ChevronLeft,{size:16}),"Previous"]}),(0,a.jsxs)("span",{className:"px-3 py-1 text-sm",children:["Page ",C.page," of ",C.pages]}),(0,a.jsxs)(s.Button,{onClick:()=>$(C.page+1),disabled:C.page===C.pages,variant:"outline",children:["Next",(0,a.jsx)(x.ChevronRight,{size:16})]})]})]})]})}e.s(["default",()=>m],43518)}]);