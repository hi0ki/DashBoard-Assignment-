(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,61072,e=>{"use strict";var a=e.i(43476);let r=e.i(71645).default.forwardRef(({className:e="",...r},t)=>(0,a.jsx)("input",{ref:t,className:`w-full px-4 py-2 rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-900 text-gray-900 dark:text-white focus:ring-2 focus:ring-primary-500 focus:border-transparent outline-none transition-all placeholder-gray-400 dark:placeholder-gray-500 ${e}`,...r}));e.s(["Button",0,({children:e,variant:r="primary",className:t="",isLoading:s,...l})=>(0,a.jsxs)("button",{className:`px-4 py-2 rounded-lg font-medium transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center ${{primary:"bg-primary-600 hover:bg-primary-700 text-white shadow-sm hover:shadow",outline:"border border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-700"}[r]} ${t}`,disabled:s||l.disabled,...l,children:[s&&(0,a.jsxs)("svg",{className:"animate-spin -ml-1 mr-2 h-4 w-4 text-current",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[(0,a.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,a.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),e]}),"Card",0,({children:e,className:r=""})=>(0,a.jsx)("div",{className:`bg-white dark:bg-gray-800 rounded-xl border border-gray-200 dark:border-gray-700 shadow-sm ${r}`,children:e}),"Input",0,r])},62865,e=>{"use strict";var a=e.i(43476),r=e.i(71645),t=e.i(61072),s=e.i(1528);function l(){let{user:e,isLoaded:l}=(0,s.useUser)(),[i,o]=(0,r.useState)(!1),[n,d]=(0,r.useState)(!0),[c,m]=(0,r.useState)(""),[u,g]=(0,r.useState)(""),[x,h]=(0,r.useState)(""),[f,p]=(0,r.useState)(""),[y,b]=(0,r.useState)(""),[j,N]=(0,r.useState)("");(0,r.useEffect)(()=>{e&&v()},[e]);let v=async()=>{if(e){d(!0);try{let a=await fetch("/api/profile");if(a.ok){let e=await a.json();e&&(g(e.firstName||""),h(e.lastName||""),p(e.imageUrl||""),b(e.bio||""),N(e.phone||""))}else 404===a.status?await w():(g(e?.firstName||""),h(e?.lastName||""))}catch(a){console.error("Error loading profile:",a),g(e?.firstName||""),h(e?.lastName||"")}finally{d(!1)}}},w=async()=>{try{let a=await fetch("/api/profile",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({firstName:e?.firstName||"",lastName:e?.lastName||"",imageUrl:e?.imageUrl||"",bio:"",phone:""})});if(a.ok){let e=await a.json();g(e.firstName||""),h(e.lastName||""),p(e.imageUrl||""),b(e.bio||""),N(e.phone||""),console.log("Initial profile created automatically")}}catch(a){console.error("Error creating initial profile:",a),g(e?.firstName||""),h(e?.lastName||""),p(e?.imageUrl||"")}},k=async e=>{let a=e.target.files?.[0];if(a){if(a.size>1048576)return void m("Image size must be less than 1MB");let e=document.createElement("canvas"),r=e.getContext("2d"),t=new Image;t.onload=()=>{let{width:a,height:s}=t;a>s?a>300&&(s=300*s/a,a=300):s>300&&(a=300*a/s,s=300),e.width=a,e.height=s,r?.drawImage(t,0,0,a,s),p(e.toDataURL("image/jpeg",.7))},t.src=URL.createObjectURL(a)}},C=async a=>{if(a.preventDefault(),e){o(!0),m("");try{if(!(await fetch("/api/profile",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({firstName:u,lastName:x,imageUrl:f,bio:y,phone:j})})).ok)throw Error("Failed to update profile");await e.update({firstName:u,lastName:x}),m("Profile updated successfully!")}catch(e){console.error("Profile update error:",e),m("Failed to update profile.")}finally{o(!1)}}};return l&&e&&!n?(0,a.jsxs)("div",{className:"max-w-3xl mx-auto space-y-6",children:[(0,a.jsxs)("div",{className:"flex flex-col gap-1",children:[(0,a.jsx)("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"Profile"}),(0,a.jsx)("p",{className:"text-gray-500 dark:text-gray-400",children:"Manage your account settings"})]}),(0,a.jsx)(t.Card,{className:"p-6",children:(0,a.jsxs)("form",{onSubmit:C,className:"space-y-8",children:[c&&(0,a.jsx)("div",{className:`p-3 rounded-lg text-sm ${c.includes("success")?"bg-green-50 text-green-700 dark:bg-green-900/20 dark:text-green-400":"bg-red-50 text-red-700"}`,children:c}),(0,a.jsxs)("div",{className:"flex flex-col md:flex-row gap-8 items-start",children:[(0,a.jsxs)("div",{className:"flex flex-col items-center space-y-4",children:[(0,a.jsxs)("div",{className:"relative h-32 w-32 rounded-full overflow-hidden bg-gray-100 dark:bg-gray-800 border-4 border-white dark:border-gray-700 shadow-md group",children:[f?(0,a.jsx)("img",{src:f,alt:"Profile",className:"h-full w-full object-cover"}):e.imageUrl?(0,a.jsx)("img",{src:e.imageUrl,alt:"Profile",className:"h-full w-full object-cover"}):(0,a.jsx)("div",{className:"h-full w-full flex items-center justify-center text-4xl font-bold text-gray-400",children:e.firstName?.charAt(0)||e.username?.charAt(0)||"U"}),(0,a.jsx)("div",{className:"absolute inset-0 bg-black/40 flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity cursor-pointer",children:(0,a.jsx)("span",{className:"text-white text-xs font-medium",children:"Change"})}),(0,a.jsx)("input",{type:"file",accept:"image/*",onChange:k,className:"absolute inset-0 w-full h-full opacity-0 cursor-pointer"})]}),(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsxs)("button",{type:"button",className:"relative text-sm text-primary-600 font-medium hover:text-primary-500",children:[(0,a.jsx)("span",{children:"Change Profile Picture"}),(0,a.jsx)("input",{type:"file",accept:"image/*",onChange:k,className:"absolute inset-0 w-full h-full opacity-0 cursor-pointer"})]}),(0,a.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"JPG, GIF or PNG. Max 1MB."}),(0,a.jsx)("p",{className:"text-xs text-gray-400 mt-1",children:"Default: Gmail profile picture"})]})]}),(0,a.jsxs)("div",{className:"flex-1 w-full space-y-6",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"First Name"}),(0,a.jsx)(t.Input,{value:u,onChange:e=>g(e.target.value),required:!0,placeholder:"John"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Last Name"}),(0,a.jsx)(t.Input,{value:x,onChange:e=>h(e.target.value),required:!0,placeholder:"Doe"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Email Address"}),(0,a.jsx)(t.Input,{value:e.primaryEmailAddress?.emailAddress||"No email",disabled:!0,className:"bg-gray-50 dark:bg-gray-800 cursor-not-allowed opacity-60"}),(0,a.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"Email cannot be changed here. Manage it in your Google account."})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Phone Number"}),(0,a.jsx)(t.Input,{type:"tel",value:j,onChange:e=>N(e.target.value),placeholder:"+1 (555) 123-4567"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Bio"}),(0,a.jsx)("textarea",{value:y,onChange:e=>b(e.target.value),placeholder:"Tell us about yourself...",rows:4,className:"w-full px-4 py-2 rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-900 text-gray-900 dark:text-white focus:ring-2 focus:ring-primary-500 focus:border-transparent outline-none transition-all placeholder-gray-400 dark:placeholder-gray-500 resize-none"})]})]})]}),(0,a.jsx)("div",{className:"flex justify-end pt-6 border-t border-gray-200 dark:border-gray-700",children:(0,a.jsx)(t.Button,{type:"submit",isLoading:i,children:"Save Changes"})})]})})]}):(0,a.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:(0,a.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})})}e.s(["default",()=>l])}]);